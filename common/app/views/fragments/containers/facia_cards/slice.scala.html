@(slice: layout.SliceWithCards, containerIndex: Int)(implicit request: RequestHeader, config: model.Config)

@import layout.{ColumnAndCards, SingleItem, Rows, SplitColumn}
@import views.html.fragments.items.facia_cards.item

<div class="facia-slice-wrapper">
    <ul class="u-unstyled l-row l-row--items-@slice.numberOfColumns facia-slice facia-slice--@slice.cssClassName">
    @for(ColumnAndCards(column, cards) <- slice.columns) {
        @column match {
            case SingleItem(colSpan, itemClasses) => {
                @cards.headOption.map { card =>
                    @item(card, itemClasses.classes, containerIndex, false, colSpan)
                }
            }

            case Rows(colSpan, columns, rows, itemClasses) => {
                <li class="facia-slice__item l-row__item l-row__item--span-@colSpan">
                    <ul class="u-unstyled l-list l-list--columns-@columns l-list--rows-@rows">
                        @if(cards.nonEmpty) {
                            @cards.map{ card =>
                                @item(card, itemClasses.classes, containerIndex, isList = true)
                            }
                        }
                    </ul>
                </li>
            }

            case SplitColumn(colSpan, topItemClasses, bottomItemsClasses) => {
                <li class="facia-slice__item l-row__item l-row__item--span-@colSpan">
                    <ul class="u-unstyled l-list l-list--columns-1 l-list--rows-3">
                        @cards.headOption.map { card =>
                            @item(card, topItemClasses.classes, containerIndex, isList = true)
                        }
                        @cards.tail.map { card =>
                            @item(card, bottomItemsClasses.classes, containerIndex, isList = true)
                        }
                    </ul>
                </li>
            }

            case _ => { @* TODO *@ }
        }
    }
    </ul>
</div>
